function showHideNav(){$("nav").hasClass("expanded")?hideNav():showNav()}function showNav(){$("nav").removeClass("invisible").addClass("expanded"),$("#blur").addClass("blurred"),window.setTimeout(function(){$("body").addClass("no_scroll")},200),$("#navigation a").attr("tabindex","")}function hideNav(){$("#blur").removeClass("blurred"),window.setTimeout(function(){$("body").removeClass()},10),$("nav").removeClass("expanded"),$("#navigation a").attr("tabindex","-1"),$(".icon").blur()}var previousScroll=0,menuOffset=54,detachPoint=650,hideShowOffset=6;$(window).scroll(function(){if(!$("nav").hasClass("expanded")){var e=$(this).scrollTop(),a=Math.abs(e-previousScroll);e>menuOffset?(e>detachPoint&&($("nav").hasClass("detached")||$("nav").addClass("detached")),a>=hideShowOffset&&(e>previousScroll?$("nav").hasClass("invisible")||$("nav").addClass("invisible"):$("nav").hasClass("invisible")&&$("nav").removeClass("invisible"))):0>=e&&$("nav").removeClass(),window.innerHeight+window.scrollY>=document.body.offsetHeight&&$("nav").removeClass("invisible"),previousScroll=e}}),$("nav").on("click touchstart",function(e){showHideNav(),e.preventDefault()}),$("#navigation").on("click touchstart",function(e){e.stopPropagation()}),$("body").keydown(function(e){$("nav .icon").is(":focus")&&(13===e.keyCode||32===e.keyCode)&&(showHideNav(),e.preventDefault()),(27===e.keyCode||77===e.keyCode)&&(showHideNav(),e.preventDefault())});